function Init(e,t){const n="Social Club Utility Tool",o="SCUT",r="https://github.com/Senexis/Social-Club-Tool",s="https://github.com/Senexis/Social-Club-Tool/issues/new",a="https://"+window.location.host,i=localStorage.getItem("SCUT_CLIENT_VERSION");try{console.log.apply(console,["%c "+n+" %cv25 by Senex %c "+r,"background:#000000;color:#f90","background:#000000;color:#ffffff",""])}catch(e){console.log(n+" v25 by Senex - "+r)}function l(e,t){console.groupCollapsed("["+o+": INFO] "+e),console.log(t),console.groupEnd()}function c(e,t){console.groupCollapsed("["+o+": ERROR] "+e),console.error(t),console.groupEnd()}function d(e,t,n){console.groupCollapsed("["+o+": AJAX] "+e),console.group("Request"),console.log(t),console.groupEnd(),console.group("Response"),console.log(n),console.groupEnd(),console.groupEnd()}function u(e,t,n){return{type:e,title:t,text:n,allowEscapeKey:!1,cancelButtonText:"No",closeOnConfirm:!1,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",html:!0,showCancelButton:!0,showLoaderOnConfirm:!0}}function p(e,t,n,o){return void 0===o&&(o=5e3),{type:e,title:t,text:n,allowOutsideClick:!0,html:!0,timer:o}}function g(e,t,n){return{type:e,title:t,text:n,allowEscapeKey:!1,allowOutsideClick:!1,html:!0}}void 0===e&&(e=""),e=e.replace(/\\\"/g,"").replace(/\"/g,"").replace(/\s\s+/g," ").trim(),void 0===t&&(t=1);try{var h=document.createElement("script");h.id="nt-jqjs",h.src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.6.4/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(h);var m=document.createElement("link");m.id="nt-sacss",m.rel="stylesheet",m.href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css",document.getElementsByTagName("head")[0].appendChild(m);var f=document.createElement("script");f.id="nt-sajs",f.src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js",document.getElementsByTagName("head")[0].appendChild(f)}catch(e){return void c("Something went wrong while trying to load the necessary scripts.",e)}setTimeout(function(){if("https:"===window.location.protocol&&window.location.host.endsWith("socialclub.rockstargames.com"))try{try{var o=$(siteMaster.aft)[0].value,h=siteMaster.authUserNickName,m=siteMaster.isLoggedIn}catch(e){return c("Could not fetch all necessary account data because something went wrong.",e),void swal(g("error","An error occured",'<p style="margin:12px 0!important">'+n+' was unable to retrieve the required account data. Please try clicking the bookmark again. If the problem persists, please <a href="'+s+'" target="_blank">submit an issue</a> with the details below.</p><p style="margin:12px 0!important">Error:</p><pre>'+e+"</pre>"))}if(""!=h&&m){function f(e){$.ajax({url:e.url,error:e.error,success:e.success,type:"GET",headers:{"Content-Type":"application/json",RequestVerificationToken:o},xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){"X-Requested-With"!=e&&t.call(this,e,n)},e}})}function w(e){$.ajax({url:e.url,data:JSON.stringify(e.data),error:e.error,success:e.success,complete:e.complete,type:e.type,headers:{"Content-Type":"application/json",RequestVerificationToken:o},xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){"X-Requested-With"!=e&&t.call(this,e,n)},e}})}function y(e,t){try{void 0===t&&(t=!1),setTimeout(function(){var n=function(){($("#nt-dam-progress-current").text(e.length),e.length>0)?y(e,t):swal(p(t?"warning":"success","Messages removed",(t?"<p>One or more messages could not be deleted due to an error. Please try again or remove them manually.</p>":"<p>All messages in your inbox have been deleted.</p>")+"<p>To view the changes to your inbox, please refresh the page.</p>",t?6e4:5e3))},o=e.pop();if(void 0===o)return c("An item has been skipped.","The current item is undefined, also I'm a teapot."),void n();l("Popped the items list in RemoveMessages().",o),w({url:a+"/Message/DeleteMessage",type:"POST",data:{messageid:o.ID,isAdmin:o.IsAdminMessage},error:function(e){d("Couldn't complete delete message "+o.ID+" in RemoveMessages().",this,e),t=!0},success:function(e){d("Successfully completed deleted message "+o.ID+" in RemoveMessages().",this,e),1!=e.Status&&(t=!0)},complete:n})},1e3)}catch(e){return void c("Something went wrong in RemoveMessages().",e)}}function v(e,t,n){try{void 0===t&&(t=!1),void 0===n&&(n=[]),setTimeout(function(){var o=void 0,r=function(){if($("#nt-daf-progress-current, #nt-raf-progress-current").text(e.length),e.length>0)v(e,t,n);else{var o=0===n.length?"success":"warning",r=0===n.length?5e3:6e4,s=n.reduce(function(e,t,o){return e+t+(o===n.length-2?" and ":", ")},"").slice(0,-2);t?swal(p(o,"Friend requests rejected",(0!==n.length?"<p>"+s+" could not be rejected due to an error. Please try again or remove them manually.</p>":"<p>All friend requests you received have been rejected.</p>")+"<p>To view the changes to your friends list, please refresh the page.</p>",r)):swal(p(o,"Friends removed",(0!==n.length?"<p>"+s+" could not be deleted due to an error. Please try again or remove them manually.</p>":"<p>All friends have been deleted.</p>")+"<p>To view the changes to your friends list, please refresh the page.</p>",r))}},s=e.pop();return void 0===s?(c("An item has been skipped.","The current item is undefined, also I'm a teapot."),void r()):(l("Popped the items list in RemoveFriends().",s),"InvitedByThem"!==s.Relationship?(c("An item has been skipped.","No operation is possible for "+s.Name+"."),n.push(s.Name),void r()):(o="ignore",void w({url:a+"/friends/UpdateFriend",type:"PUT",data:{id:s.RockstarId,op:o},error:function(e){d("Couldn't complete "+o+" "+s.Name+" in RemoveFriends().",this,e),n.push(s.Name)},success:function(e){d("Successfully completed "+o+" "+s.Name+" in RemoveFriends().",this,e),1!=e.Status&&n.push(s.Name)},complete:r})))},1e3)}catch(e){return void c("Something went wrong in RemoveFriends().",e)}}function b(t){try{w({url:a+"/friends/UpdateFriend",type:"PUT",data:{id:t.RockstarId,op:"addfriend",custommessage:e},error:function(e){d("Couldn't complete add "+t.Nickname+" in AddFriend().",this,e),swal(p("error",e.status+" - "+e.statusText,"Something went wrong trying to add <strong>"+t.Nickname+"</strong>."))},success:function(e){d("Successfully completed add "+t.Nickname+" in AddFriend().",this,e),1==e.Status?swal(p("success","User added","<p>A friend request has been sent to <strong>"+t.Nickname+"</strong>.</p><p>To view the changes to your friends list, please refresh the page.</p>")):swal(p("error","Something went wrong","Something went wrong trying to add <strong>"+t.Nickname+"</strong>."))}})}catch(e){return void c("Something went wrong in AddFriend().",e)}}$("<style>body{margin-bottom:100px}#nt-root{z-index:999;position:fixed;bottom:0;left:0;right:0;text-align:center;background-color:rgba(0,0,0,.9);padding:.5rem}#nt-cred{color:white;border-top:solid 1px #333;padding:.5rem 0;margin-top:.5rem}#nt-cred a{color:white}#nt-update{padding:.5em;width:100%;height:10em;border:2px solid #f90;text-align:center;resize:none;background:0 0;cursor:initial}.sweet-alert button,.sweet-alert button.cancel,.nt-button{background:linear-gradient(90deg,#f7931e,#fcaf17)!important;border-color:#fcaf17!important;border-radius:3px;border-style:solid;border-width:1px;box-shadow:none!important;color:#fff;cursor:pointer;display:inline-block!important;font-family:-apple-system,BlinkMacSystemFont,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:1rem;font-weight:700;line-height:2.25rem;padding:0 1.25rem;margin-right:.5rem;text-align:center;text-decoration:none;text-shadow:0 1px 1px rgba(26,26,26,.2);vertical-align:bottom}.sweet-alert button.cancel{background:linear-gradient(90deg,#aaa,#ccc)!important;border-color:#ccc!important}.sweet-alert button:active:not(:disabled),.sweet-alert button:hover:not(:disabled),.nt-button:active:not(:disabled),.nt-button:hover:not(:disabled){background:#fcaf17!important}.sweet-alert button.cancel:active:not(:disabled),.sweet-alert button.cancel:hover:not(:disabled){background:#ccc!important}.sweet-alert{background-color:#333;color:white;box-shadow:0 2px 5px 0 rgba(0,0,0,.5);border-radius:.5rem}.sweet-alert p,.sweet-alert h2{color:white}.sweet-alert p{margin:12px 0!important}.sweet-alert strong{font-weight:700!important}.sweet-alert ul{list-style:outside}.sweet-alert fieldset{display:none}.sweet-alert.show-input fieldset{display:block}.sweet-alert input{background:#333!important;border:solid 3px white;border-radius:.5rem;color:white}.sweet-alert input:focus{outline:0;background:rgba(255,255,255,.1);border:solid 3px white;box-shadow:none!important}.sweet-alert .sa-input-error{top:27px}.sweet-alert .sa-error-container,.sweet-alert .sa-icon.sa-success .sa-fix,.sweet-alert .sa-icon.sa-success::before,.sweet-alert .sa-icon.sa-success::after{background:#333!important}.sweet-alert .sa-icon.sa-success .sa-fix{width:7px;height:92px}.la-ball-fall{color:rgba(255,255,255,.5)!important}</style>").appendTo("head"),document.getElementById("nt-root")&&$("#nt-root").remove(),document.getElementById("nt-dam")&&$("#nt-dam").remove(),document.getElementById("nt-daf")&&$("#nt-daf").remove(),document.getElementById("nt-raf")&&$("#nt-raf").remove(),document.getElementById("nt-qa")&&$("#nt-qa").remove(),document.getElementById("nt-cred")&&$("#nt-cred").remove(),$('<div id="nt-root"></div>').prependTo("body"),$('<a id="nt-dam" class="nt-button" href="javascript:void(0)">Delete all messages</a>').appendTo("#nt-root"),$('<a id="nt-daf" class="nt-button" href="javascript:void(0)">Delete all friends</a>').appendTo("#nt-root"),$('<a id="nt-raf" class="nt-button" href="javascript:void(0)">Reject all friend requests</a>').appendTo("#nt-root"),$('<a id="nt-qa" class="nt-button" href="javascript:void(0)">Quick-add user</a>').appendTo("#nt-root"),$('<div id="nt-cred"> // <a href="'+r+'" target="_blank"><span style="color:#f7931e">'+n+"</span> by Senex</a> // v25 // </div>").appendTo("#nt-root"),25!=i&&($("#nt-cred").append('<span style="color:#f7931e">Updated automatically!</span> //'),localStorage.setItem("SCUT_CLIENT_VERSION",25)),$("#nt-dam").click(function(e){e.preventDefault();try{swal(u("warning","Are you sure?",'<p>All messages will be deleted from your inbox.</p><p>This process may take up to several minutes. Please be patient for it to be completed before browsing away from this page.</p><p><strong id="nt-dam-retrieving" style="display:none;">Retrieving <span id="nt-dam-retrieving-text">conversation list</span>...</strong></p><p><strong id="nt-dam-progress" style="display:none;"><span id="nt-dam-progress-current">0</span> of <span id="nt-dam-progress-total">0</span> message(s) remaining...</strong></p>'),function(e){if(!e)return!1;f({url:a+"/Message/GetMessageCount",error:function(e){d("Couldn't fetch the total message count in #nt-dam_click.",this,e),swal(p("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the total amount of messages."))},success:function(e){d("Successfully fetched the total message count in #nt-dam_click.",this,e),e.Total>0?($("#nt-dam-progress-current").text(e.Total),$("#nt-dam-progress-total").text(e.Total),$("#nt-dam-retrieving").show(),function e(t,n){try{void 0===n&&(n=0),setTimeout(function(){f({url:a+"/Message/GetConversationList?pageIndex="+n,error:function(e){d("Couldn't fetch the conversation list in RetrieveAllMessageUsers().",this,e),swal(p("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the conversation list."))},success:function(n){d("Successfully fetched the conversation list in RetrieveAllMessageUsers().",this,n),n.Users.forEach(function(e){t.push(e)}),!0===n.HasMore?e(t,n.NextPageIndex):($("#nt-dam-retrieving-text").text("messages"),function e(t,n){try{void 0===n&&(n=[]),setTimeout(function(){var o=t.pop();void 0!==o?(l("Popped the items list in RetrieveAllMessages().",o),f({url:a+"/Message/GetMessages?rockstarId="+o.RockstarId,error:function(o){d("Couldn't fetch the messages list in RetrieveAllMessages().",this,o),t.length>0?e(t,n):n.length>0&&($("#nt-dam-retrieving").hide(),$("#nt-dam-progress").show(),y(n))},success:function(o){d("Successfully fetched the messages list in RetrieveAllMessages().",this,o),n=n.concat(o.Messages),t.length>0?e(t,n):n.length>0&&($("#nt-dam-retrieving").hide(),$("#nt-dam-progress").show(),y(n))}})):e(t,n)},1e3)}catch(e){return void c("Something went wrong in RetrieveAllMessages().",e)}}(t))}})},1e3)}catch(e){return void c("Something went wrong in RetrieveAllMessageUsers().",e)}}([])):swal(p("success","No messages","There were no messages to delete."))}})})}catch(e){return c("Something went wrong in #nt-dam_click.",e),!1}return!1}),$("#nt-raf").click(function(e){e.preventDefault();try{swal(u("warning","Are you sure?",'<p>All friend requests you have received will be rejected.</p><p>This process may take up to several minutes. Please be patient for it to be completed before browsing away from this page.</p><p><strong id="nt-raf-progress" style="display:none;"><span id="nt-raf-progress-current">0</span> of <span id="nt-raf-progress-total">0</span> friend request(s) remaining...</strong></p>'),function(e){if(!e)return!1;var t=[];f({url:a+"/friends/GetReceivedInvitesJson",error:function(e){d("Couldn't fetch the total received invites count in #nt-raf_click.",this,e),swal(p("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the total amount of friend requests."))},success:function(e){d("Successfully fetched the total received invites count in #nt-raf_click.",this,e),1==e.Status&&e.TotalCount>0?($("#nt-raf-progress-current").text(e.TotalCount),$("#nt-raf-progress-total").text(e.TotalCount),$("#nt-raf-progress").show(),e.RockstarAccounts.forEach(function(e){t.push(e)}),t.length==e.TotalCount&&v(t,!0)):1==e.Status&&0==e.TotalCount?swal(p("success","No friend requests","There were no friend requests to reject.")):swal(p("error","Something went wrong","Something went wrong while trying to fetch friend request data."))}})})}catch(e){return c("Something went wrong in #nt-raf_click.",e),!1}return!1}),$("#nt-daf").click(function(e){e.preventDefault();try{swal(u("warning","Are you sure?",'<p>All friends will be removed from your friend list.<p></p>This process may take up to several minutes. Please be patient for it to be completed before browsing away from this page.</p><p><strong id="nt-daf-retrieving" style="display:none;">Retrieving friends...</strong></p><p><strong id="nt-daf-progress" style="display:none;"><span id="nt-daf-progress-current">0</span> of <span id="nt-daf-progress-total">0</span> friend(s) remaining...</strong></p>'),function(e){if(!e)return!1;f({url:a+"/friends/GetFriendsAndInvitesSentJson?pageNumber=0&onlineService=sc&pendingInvitesOnly=false",error:function(e){d("Couldn't fetch the friends and invites sent list in #nt-daf_click.",this,e),swal(p("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the total amount of friends."))},success:function(e){d("Successfully fetched the friends and invites sent list in #nt-daf_click.",this,e),1==e.Status&&e.TotalCount>0?($("#nt-daf-progress-current").text(e.TotalCount),$("#nt-daf-progress-total").text(e.TotalCount),$("#nt-daf-retrieving").show(),function e(t,n){try{void 0===n&&(n=0),setTimeout(function(){f({url:a+"/friends/GetFriendsAndInvitesSentJson?pageNumber="+n+"&onlineService=sc&pendingInvitesOnly=false",error:function(e){d("Couldn't fetch the friends and invites sent list in RetrieveAllFriends().",this,e),swal(p("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch data from page "+n+"."))},success:function(o){d("Successfully fetched the friends and invites sent list in RetrieveAllFriends().",this,o),1==o.Status?o.RockstarAccounts.forEach(function(e){void 0!==e&&t.push(e)}):swal(p("error","Something went wrong","Something went wrong while trying to fetch data from page "+n+".")),t.length<o.TotalCount?e(t,n+1):($("#nt-daf-retrieving").hide(),$("#nt-daf-progress").show(),v(t))}})},1e3)}catch(e){return void c("Something went wrong in RetrieveAllFriends().",e)}}([])):1==e.Status&&0==e.TotalCount?swal(p("success","No friends","There were no friends to delete.")):swal(p("error","Something went wrong","Something went wrong while trying to fetch friend data."))}})})}catch(e){return c("Something went wrong in #nt-daf_click.",e),!1}return!1}),$("#nt-qa").click(function(n){n.preventDefault();try{swal({type:"input",title:"Enter username",text:'<p>Please enter the Social Club username you want to add. When you click "Add", the user will automatically be added if it exists.</p>'+(t?"":"<p><strong>Note:</strong> You have disabled the blocked users list check. If the user is on your blocked users list, they will be unblocked and sent a friend request.</p>")+(""==e?"":"<p><strong>Note:</strong> You have set a custom friend request message, which will get sent to the user.</p>"),allowEscapeKey:!1,closeOnConfirm:!1,confirmButtonText:"Add",html:!0,inputPlaceholder:"Social Club username",showCancelButton:!0,showLoaderOnConfirm:!0},function(e){return!1!==e&&(""===(e=e.trim())?(swal.showInputError("The username field can't be empty."),!1):e.match(new RegExp("([^A-Za-z0-9-_.])"))?(swal.showInputError("The username field contains invalid characters."),!1):e.length<6?(swal.showInputError("The username field can't be shorter than 6 characters."),!1):e.length>16?(swal.showInputError("The username field can't be longer than 16 characters."),!1):e.toLowerCase()===h.toLowerCase()?(swal.showInputError("You can't add yourself as a friend."),!1):void f({url:a+"/Friends/GetAccountDetails?nickname="+e+"&full=false",error:function(t){d("Couldn't fetch the account details of "+e+" in #nt-qa_click.",this,t),swal(p("error",t.status+" - "+t.statusText,"Something went wrong while trying to check whether <strong>"+e+"</strong> exists or not."))},success:function(n){d("Successfully fetched the account details of "+e+" in #nt-qa_click.",this,n),1==n.Status?"Friend"==n.Relation?swal(p("success","Already added","<strong>"+e+"</strong> is already your friend.")):1==n.AllowAddFriend?t?function(e){try{var t=[];setTimeout(function(){f({url:a+"/friends/GetBlockedJson",error:function(e){d("Couldn't fetch blocked users list in RetrieveBlockedList().",this,e),swal(p("error",e.status+" - "+e.statusText,"Something went wrong while trying to retrieve blocked users."))},success:function(n){if(d("Successfully fetched blocked users list in RetrieveBlockedList().",this,n),1==n.Status){n.RockstarAccounts.forEach(function(e){void 0!==e&&t.push(e)});var o=t.filter(function(t){return t.Name.trim().toLowerCase()===e.Nickname.trim().toLowerCase()})[0];null==o?b(e):swal(p("error","User blocked","<strong>"+e.Nickname+"</strong> is on your blocked users list. To be able to send them a friend request, remove them from your blocked users list, then try again."))}else swal(p("error","Something went wrong","Something went wrong while trying to retrieve blocked users."))}})},1e3)}catch(e){return void c("Something went wrong in RetrieveBlockedList().",e)}}(n):b(n):1==n.AllowAcceptFriend?function(e){try{w({url:a+"/friends/UpdateFriend",type:"PUT",data:{id:e.RockstarId,op:"confirm",accept:"true"},error:function(t){d("Couldn't complete accept "+e.Nickname+"'s friend request in AcceptFriend().",this,t),swal(p("error",t.status+" - "+t.statusText,"Something went wrong trying to accept <strong>"+e.Nickname+"</strong>'s friend request."))},success:function(t){d("Successfully completed accept "+e.Nickname+"'s friend request in AcceptFriend().",this,t),1==t.Status?swal(p("success","User accepted","<p><strong>"+e.Nickname+"</strong> already sent you a friend request, and we accepted it instead of sending a new one.</p><p>To view the changes to your friends list, please refresh the page.</p>")):swal(p("error","Something went wrong","Something went wrong trying to accept <strong>"+e.Nickname+"</strong>'s friend request."))}})}catch(e){return void c("Something went wrong in AcceptFriend().",e)}}(n):swal(p("error","Can't send request","You can't send <strong>"+e+"</strong> a friend request. This might be because you already sent them a friend request, or because they blocked you.")):swal(p("error","User not found","The nickname <strong>"+e+"</strong> doesn't exist."))}}))})}catch(e){return c("Something went wrong in #nt-qa_click.",e),!1}return!1})}else c("In order to use "+n+", you must log into your Social Club account.",'userNickname == "" || isLoggedIn != true'),swal(g("error","Log in required",n+" requires you to log in to be able to apply changes to your account. Please log into the account you want to use with "+n+", then click the bookmark again."))}catch(e){return c("Something went wrong.",e),void swal(g("error","An error occured",'<p style="margin:12px 0!important">'+n+' was unable to complete your request. Please try clicking the bookmark again. If the problem persists, please <a href="'+s+'" target="_blank">submit an issue</a> with the details below.</p><p style="margin:12px 0!important">Error:</p><pre>'+e+"</pre>"))}else c("The current website is not a Social Club website and "+n+" can't continue.",'window.location.protocol !== "https:" || !window.location.host.endsWith("socialclub.rockstargames.com")'),swal({type:"warning",title:"Wrong site",text:"<p>Whoops, you accidentally activated "+n+" on a wrong web page. To use "+n+", first browse to the Social Club website, then click the bookmark again.</p><p>Do you want to go to the Social Club website now?</p>",allowOutsideClick:!0,cancelButtonText:"No",closeOnConfirm:!1,confirmButtonText:"Yes",html:!0,showCancelButton:!0},function(){window.location.href="http://socialclub.rockstargames.com/"})},1e3)}