function Init(e,t){const n="Social Club Utility Tool",s="SCUT",r="https://github.com/Senexis/Social-Club-Tool",o="https://github.com/Senexis/Social-Club-Tool/issues/new",a="https://"+window.location.host,i=localStorage.getItem("SCUT_CLIENT_VERSION");try{console.log.apply(console,["%c "+n+" %cv26 by Senex %c "+r,"background:#000000;color:#f90","background:#000000;color:#ffffff",""])}catch(e){console.log(n+" v26 by Senex - "+r)}function c(e,t){console.groupCollapsed("["+s+": INFO] "+e),console.log(t),console.groupEnd()}function l(e,t){console.groupCollapsed("["+s+": ERROR] "+e),console.error(t),console.groupEnd()}function u(e,t,n){console.groupCollapsed("["+s+": AJAX] "+e),console.group("Request"),console.log(t),console.groupEnd(),console.group("Response"),console.log(n),console.groupEnd(),console.groupEnd()}function d(e,t,n){return{type:e,title:t,text:n,allowEscapeKey:!1,cancelButtonText:"No",closeOnConfirm:!1,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",html:!0,showCancelButton:!0,showLoaderOnConfirm:!0}}function h(e,t,n,s){return void 0===s&&(s=5e3),{type:e,title:t,text:n,allowOutsideClick:!0,html:!0,timer:s}}function p(e,t,n){return{type:e,title:t,text:n,allowEscapeKey:!1,allowOutsideClick:!1,html:!0}}void 0===e&&(e=""),e=e.replace(/\\\"/g,"").replace(/\"/g,"").replace(/\s\s+/g," ").trim(),void 0===t&&(t=1);try{var g=document.createElement("script");g.id="nt-jqjs",g.src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.6.4/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(g);var m=document.createElement("link");m.id="nt-sacss",m.rel="stylesheet",m.href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css",document.getElementsByTagName("head")[0].appendChild(m);var f=document.createElement("script");f.id="nt-sajs",f.src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js",document.getElementsByTagName("head")[0].appendChild(f)}catch(e){return void l("Something went wrong while trying to load the necessary scripts.",e)}setTimeout(function(){if("https:"===window.location.protocol&&window.location.host.endsWith("socialclub.rockstargames.com"))try{try{var s=$(siteMaster.aft)[0].value,g=siteMaster.authUserNickName,m=siteMaster.isLoggedIn}catch(e){return l("Could not fetch all necessary account data because something went wrong.",e),void swal(p("error","An error occured",'<p style="margin:12px 0!important">'+n+' was unable to retrieve the required account data. Please try clicking the bookmark again. If the problem persists, please <a href="'+o+'" target="_blank">submit an issue</a> with the details below.</p><p style="margin:12px 0!important">Error:</p><pre>'+e+"</pre>"))}if(""!=g&&m){function f(e){$.ajax({url:e.url,error:e.error,success:e.success,type:"GET",headers:{"Content-Type":"application/json",RequestVerificationToken:s},xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){"X-Requested-With"!=e&&t.call(this,e,n)},e}})}function w(e){$.ajax({url:e.url,data:JSON.stringify(e.data),error:e.error,success:e.success,complete:e.complete,type:e.type,headers:{"Content-Type":"application/json",RequestVerificationToken:s},xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){"X-Requested-With"!=e&&t.call(this,e,n)},e}})}function y(e){try{var t=(s=siteMaster.scauth.tokenCookieName,(r=document.cookie.match("(^|;) ?"+s+"=([^;]*)(;|$)"))?r[2]:null),n={method:e.method,credentials:"same-origin",cache:"default",mode:"cors",headers:{"X-Requested-With":"XMLHttpRequest","X-Lang":"en-US","X-Cache-Ver":"10",Authorization:`Bearer ${t}`}};fetch(e.url,n).then(e=>e.json()).then(t=>e.success(t)).catch(t=>e.error(t))}catch(t){e.error(t)}var s,r}function b(e,t){try{void 0===t&&(t=!1),setTimeout(function(){var n=function(){($(".nt-swal-progress-current").text(e.length),e.length>0)?b(e,t):swal(h(t?"warning":"success","Messages removed",(t?"<p>One or more messages could not be deleted due to an error. Please try again or remove them manually.</p>":"<p>All messages in your inbox have been deleted.</p>")+"<p>To view the changes to your inbox, please refresh the page.</p>",t?6e4:5e3))},s=e.pop();if(void 0===s)return l("An item has been skipped.","The current item is undefined, also I'm a teapot."),void n();c("Popped the items list in RemoveMessages().",s),w({url:a+"/Message/DeleteMessage",type:"POST",data:{messageid:s.ID,isAdmin:s.IsAdminMessage},error:function(e){u("Couldn't complete delete message "+s.ID+" in RemoveMessages().",this,e),t=!0},success:function(e){u("Successfully completed deleted message "+s.ID+" in RemoveMessages().",this,e),1!=e.Status&&(t=!0)},complete:n})},1e3)}catch(e){return void l("Something went wrong in RemoveMessages().",e)}}function v(e,t,n,s,r,o){try{void 0===s&&(s=[]),void 0===r&&(r=0),void 0===o&&(o=12),y({url:`${e}?onlineService=sc&nickname=&pageIndex=${r}&pageSize=${o}`,method:"GET",success:function(e){u("Successfully fetched the friends list in RetrieveRockstarAccounts().",this,e),1==e.status?e.rockstarAccountList.rockstarAccounts.forEach(function(e){void 0!==e&&s.push(e)}):swal(h("error","Something went wrong","Something went wrong while trying to fetch data from page "+r+".")),s.length<e.rockstarAccountList.total?v(url,s,r+1,o):($(".nt-swal-retrieving").hide(),$(".nt-swal-progress").show(),function e(t,n,s,r){try{void 0===r&&(r=[]),setTimeout(function(){var o=function(){$(".nt-swal-progress-current").text(s.length),s.length>0?e(t,n,s,r):n(r)},a=s.pop();if(void 0===a)return l("An item has been skipped.","The current item is undefined, also I'm a teapot."),void o();c("Popped the items list in ProcessRockstarAccounts().",a),y({url:`${t}?rockstarId=${a.rockstarId}`,method:"POST",success:function(e){u("Successfully processed the popped item in ProcessRockstarAccounts().",this,e),1!=e.status&&r.push(a.name),o()},error:function(e){u("Couldn't process the popped item in ProcessRockstarAccounts().",this,e),r.push(a.name),o()}})},1e3)}catch(e){return void l("Something went wrong in ProcessRockstarAccounts().",e)}}(t,n,s))},error:function(e){u("Couldn't fetch the friends list in RetrieveRockstarAccounts().",this,e),swal(h("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch data from page "+r+"."))}})}catch(e){return void l("Something went wrong in RetrieveRockstarAccounts().",e)}}function k(t){try{w({url:a+"/friends/UpdateFriend",type:"PUT",data:{id:t.RockstarId,op:"addfriend",custommessage:e},error:function(e){u("Couldn't complete add "+t.Nickname+" in AddFriend().",this,e),swal(h("error",e.status+" - "+e.statusText,"Something went wrong trying to add <strong>"+t.Nickname+"</strong>."))},success:function(e){u("Successfully completed add "+t.Nickname+" in AddFriend().",this,e),1==e.Status?swal(h("success","User added","<p>A friend request has been sent to <strong>"+t.Nickname+"</strong>.</p><p>To view the changes to your friends list, please refresh the page.</p>")):swal(h("error","Something went wrong","Something went wrong trying to add <strong>"+t.Nickname+"</strong>."))}})}catch(e){return void l("Something went wrong in AddFriend().",e)}}$("<style>body{margin-bottom:99px}#nt-root{z-index:999;position:fixed;bottom:0;left:0;right:0;text-align:center;background-color:rgba(0,0,0,.9);padding:.5rem}#nt-cred{color:white;border-top:solid 1px #333;padding:.5rem 0;margin-top:.5rem}#nt-cred a{color:white}#nt-update{padding:.5em;width:100%;height:10em;border:2px solid #f90;text-align:center;resize:none;background:0 0;cursor:initial}.sweet-alert button,.sweet-alert button.cancel,.nt-button{background:linear-gradient(90deg,#f7931e,#fcaf17)!important;border-color:#fcaf17!important;border-radius:3px;border-style:solid;border-width:1px;box-shadow:none!important;color:#fff;cursor:pointer;display:inline-block!important;font-family:-apple-system,BlinkMacSystemFont,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:1rem;font-weight:700;line-height:2.25rem;padding:0 1.25rem;margin-right:.5rem;text-align:center;text-decoration:none;text-shadow:0 1px 1px rgba(26,26,26,.2);vertical-align:bottom}.sweet-alert button.cancel{background:linear-gradient(90deg,#aaa,#ccc)!important;border-color:#ccc!important}.sweet-alert button:active:not(:disabled),.sweet-alert button:hover:not(:disabled),.nt-button:active:not(:disabled),.nt-button:hover:not(:disabled){background:#fcaf17!important}.sweet-alert button.cancel:active:not(:disabled),.sweet-alert button.cancel:hover:not(:disabled){background:#ccc!important}.sweet-alert{background-color:#333;color:white;box-shadow:0 2px 5px 0 rgba(0,0,0,.5);border-radius:.5rem}.sweet-alert p,.sweet-alert h2{color:white}.sweet-alert p{margin:12px 0!important}.sweet-alert strong{font-weight:700!important}.sweet-alert ul{list-style:outside}.sweet-alert fieldset{display:none}.sweet-alert.show-input fieldset{display:block}.sweet-alert input{background:#333!important;border:solid 3px white;border-radius:.5rem;color:white}.sweet-alert input:focus{outline:0;background:rgba(255,255,255,.1);border:solid 3px white;box-shadow:none!important}.sweet-alert .sa-input-error{top:27px}.sweet-alert .sa-error-container,.sweet-alert .sa-icon.sa-success .sa-fix,.sweet-alert .sa-icon.sa-success::before,.sweet-alert .sa-icon.sa-success::after{background:#333!important}.sweet-alert .sa-icon.sa-success .sa-fix{width:7px;height:92px}.la-ball-fall{color:rgba(255,255,255,.5)!important}</style>").appendTo("head"),document.getElementById("nt-root")&&$("#nt-root").remove(),document.getElementById("nt-dam")&&$("#nt-dam").remove(),document.getElementById("nt-daf")&&$("#nt-daf").remove(),document.getElementById("nt-raf")&&$("#nt-raf").remove(),document.getElementById("nt-qa")&&$("#nt-qa").remove(),document.getElementById("nt-cred")&&$("#nt-cred").remove(),$('<div id="nt-root"></div>').prependTo("body"),$('<a id="nt-dam" class="nt-button" href="javascript:void(0)">Delete all messages</a>').appendTo("#nt-root"),$('<a id="nt-daf" class="nt-button" href="javascript:void(0)">Delete all friends</a>').appendTo("#nt-root"),$('<a id="nt-raf" class="nt-button" href="javascript:void(0)">Reject all friend requests</a>').appendTo("#nt-root"),$('<a id="nt-qa" class="nt-button" href="javascript:void(0)">Quick-add user</a>').appendTo("#nt-root"),$('<div id="nt-cred"> // <a href="'+r+'" target="_blank"><span style="color:#f7931e">'+n+"</span> by Senex</a> // v26 // </div>").appendTo("#nt-root"),26!=i&&($("#nt-cred").append('<span style="color:#f7931e">Updated automatically!</span> //'),localStorage.setItem("SCUT_CLIENT_VERSION",26)),$("#nt-dam").click(function(e){e.preventDefault();try{swal(d("warning","Are you sure?",'<p>All messages will be deleted from your inbox.</p><p>This process may take up to several minutes. Please be patient for it to be completed before browsing away from this page.</p><p><strong class="nt-swal-retrieving" style="display:none;">Retrieving <span class="nt-swal-retrieving-text">conversation list</span>...</strong></p><p><strong class="nt-swal-progress" style="display:none;"><span class="nt-swal-progress-current">0</span> of <span class="nt-swal-progress-total">0</span> message(s) remaining...</strong></p>'),function(e){if(!e)return!1;f({url:a+"/Message/GetMessageCount",error:function(e){u("Couldn't fetch the total message count in #nt-dam_click.",this,e),swal(h("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the total amount of messages."))},success:function(e){u("Successfully fetched the total message count in #nt-dam_click.",this,e),e.Total>0?($(".nt-swal-progress-current").text(e.Total),$(".nt-swal-progress-total").text(e.Total),$(".nt-swal-retrieving").show(),function e(t,n){try{void 0===n&&(n=0),setTimeout(function(){f({url:a+"/Message/GetConversationList?pageIndex="+n,error:function(e){u("Couldn't fetch the conversation list in RetrieveAllMessageUsers().",this,e),swal(h("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the conversation list."))},success:function(n){u("Successfully fetched the conversation list in RetrieveAllMessageUsers().",this,n),n.Users.forEach(function(e){t.push(e)}),!0===n.HasMore?e(t,n.NextPageIndex):($(".nt-swal-retrieving-text").text("messages"),function e(t,n){try{void 0===n&&(n=[]),setTimeout(function(){var s=t.pop();void 0!==s?(c("Popped the items list in RetrieveAllMessages().",s),f({url:a+"/Message/GetMessages?rockstarId="+s.RockstarId,error:function(s){u("Couldn't fetch the messages list in RetrieveAllMessages().",this,s),t.length>0?e(t,n):n.length>0&&($(".nt-swal-retrieving").hide(),$(".nt-swal-progress").show(),b(n))},success:function(s){u("Successfully fetched the messages list in RetrieveAllMessages().",this,s),n=n.concat(s.Messages),t.length>0?e(t,n):n.length>0&&($(".nt-swal-retrieving").hide(),$(".nt-swal-progress").show(),b(n))}})):e(t,n)},1e3)}catch(e){return void l("Something went wrong in RetrieveAllMessages().",e)}}(t))}})},1e3)}catch(e){return void l("Something went wrong in RetrieveAllMessageUsers().",e)}}([])):swal(h("success","No messages","There were no messages to delete."))}})})}catch(e){return l("Something went wrong in #nt-dam_click.",e),!1}return!1}),$("#nt-raf").click(function(e){e.preventDefault();try{swal(d("warning","Are you sure?",'<p>All friend requests you have received will be rejected.</p><p>This process may take up to several minutes. Please be patient for it to be completed before browsing away from this page.</p><p><strong class="nt-swal-progress" style="display:none;"><span class="nt-swal-progress-current">0</span> of <span class="nt-swal-progress-total">0</span> friend request(s) remaining...</strong></p>'),function(e){if(!e)return!1;y({url:`${siteMaster.scApiBase}/friends/getInvites?onlineService=sc&nickname=&pageIndex=0&pageSize=12`,method:"GET",success:function(e){u("Successfully fetched the friend requests in #nt-raf_click.",this,e),1==e.status&&e.rockstarAccountList.total>0?($(".nt-swal-progress-current").text(e.rockstarAccountList.total),$(".nt-swal-progress-total").text(e.rockstarAccountList.total),$(".nt-swal-retrieving").show(),v(`${siteMaster.scApiBase}/friends/getInvites`,`${siteMaster.scApiBase}/friends/cancelInvite`,function(e){var t=e.length>0,n=t?"success":"warning",s="",r=t?5e3:6e4;if(t){var o=e.reduce(function(t,n,s){return t+n+(s===e.length-2?" and ":", ")},"").slice(0,-2);s="<p>"+o+" could not be cancelled due to an error. Please try again or remove them manually.</p>"}else s="<p>All friend requests have been cancelled.</p>";s+="<p>To view the changes to your friend requests, please refresh the page.</p>",swal(h(n,"Friend requests cancelled",s,r))})):1==e.status&&0==e.rockstarAccountList.total?swal(h("success","No friend requests","There were no friend requests to cancel.")):swal(h("error","Something went wrong","Something went wrong while trying to fetch friend data."))},error:function(e){u("Couldn't fetch the friend requests in #nt-raf_click.",this,e),swal(h("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the total amount of friend requests."))}})})}catch(e){return l("Something went wrong in #nt-raf_click.",e),!1}return!1}),$("#nt-daf").click(function(e){e.preventDefault();try{swal(d("warning","Are you sure?",'<p>All friends will be removed from your friend list.<p></p>This process may take up to several minutes. Please be patient for it to be completed before browsing away from this page.</p><p><strong class="nt-swal-retrieving" style="display:none;">Retrieving friends...</strong></p><p><strong class="nt-swal-progress" style="display:none;"><span class="nt-swal-progress-current">0</span> of <span class="nt-swal-progress-total">0</span> friend(s) remaining...</strong></p>'),function(e){if(!e)return!1;y({url:`${siteMaster.scApiBase}/friends/getFriendsFiltered?onlineService=sc&nickname=&pageIndex=0&pageSize=12`,method:"GET",success:function(e){u("Successfully fetched the friends list in #nt-daf_click.",this,e),1==e.status&&e.rockstarAccountList.total>0?($(".nt-swal-progress-current").text(e.rockstarAccountList.total),$(".nt-swal-progress-total").text(e.rockstarAccountList.total),$(".nt-swal-retrieving").show(),v(`${siteMaster.scApiBase}/friends/getFriendsFiltered`,`${siteMaster.scApiBase}/friends/remove`,function(e){var t=e.length>0,n=t?"success":"warning",s="",r=t?5e3:6e4;if(t){var o=e.reduce(function(t,n,s){return t+n+(s===e.length-2?" and ":", ")},"").slice(0,-2);s="<p>"+o+" could not be removed due to an error. Please try again or remove them manually.</p>"}else s="<p>All friends have been removed.</p>";s+="<p>To view the changes to your friends list, please refresh the page.</p>",swal(h(n,"Friends removed",s,r))})):1==e.status&&0==e.rockstarAccountList.total?swal(h("success","No friends","There were no friends to remove.")):swal(h("error","Something went wrong","Something went wrong while trying to fetch friend data."))},error:function(e){u("Couldn't fetch the friends list in #nt-daf_click.",this,e),swal(h("error",e.status+" - "+e.statusText,"Something went wrong while trying to fetch the total amount of friends."))}})})}catch(e){return l("Something went wrong in #nt-daf_click.",e),!1}return!1}),$("#nt-qa").click(function(n){n.preventDefault();try{swal({type:"input",title:"Enter username",text:'<p>Please enter the Social Club username you want to add. When you click "Add", the user will automatically be added if it exists.</p>'+(t?"":"<p><strong>Note:</strong> You have disabled the blocked users list check. If the user is on your blocked users list, they will be unblocked and sent a friend request.</p>")+(""==e?"":"<p><strong>Note:</strong> You have set a custom friend request message, which will get sent to the user.</p>"),allowEscapeKey:!1,closeOnConfirm:!1,confirmButtonText:"Add",html:!0,inputPlaceholder:"Social Club username",showCancelButton:!0,showLoaderOnConfirm:!0},e=>(function(e){if(!1===e)return!1;if(""===(e=e.trim()))return swal.showInputError("The username field can't be empty."),!1;if(e.match(new RegExp("([^A-Za-z0-9-_.])")))return swal.showInputError("The username field contains invalid characters."),!1;if(e.length<6)return swal.showInputError("The username field can't be shorter than 6 characters."),!1;if(e.length>16)return swal.showInputError("The username field can't be longer than 16 characters."),!1;if(e.toLowerCase()===g.toLowerCase())return swal.showInputError("You can't add yourself as a friend."),!1;f({url:a+"/Friends/GetAccountDetails?nickname="+e+"&full=false",error:function(t){u("Couldn't fetch the account details of "+e+" in #nt-qa_click.",this,t),swal(h("error",t.status+" - "+t.statusText,"Something went wrong while trying to check whether <strong>"+e+"</strong> exists or not."))},success:function(n){u("Successfully fetched the account details of "+e+" in #nt-qa_click.",this,n),1==n.Status?"Friend"==n.Relation?swal(h("success","Already added","<strong>"+e+"</strong> is already your friend.")):1==n.AllowAddFriend?t?function(e){try{var t=[];setTimeout(function(){f({url:a+"/friends/GetBlockedJson",error:function(e){u("Couldn't fetch blocked users list in RetrieveBlockedList().",this,e),swal(h("error",e.status+" - "+e.statusText,"Something went wrong while trying to retrieve blocked users."))},success:function(n){if(u("Successfully fetched blocked users list in RetrieveBlockedList().",this,n),1==n.Status){n.RockstarAccounts.forEach(function(e){void 0!==e&&t.push(e)});var s=t.filter(function(t){return t.Name.trim().toLowerCase()===e.Nickname.trim().toLowerCase()})[0];null==s?k(e):swal(h("error","User blocked","<strong>"+e.Nickname+"</strong> is on your blocked users list. To be able to send them a friend request, remove them from your blocked users list, then try again."))}else swal(h("error","Something went wrong","Something went wrong while trying to retrieve blocked users."))}})},1e3)}catch(e){return void l("Something went wrong in RetrieveBlockedList().",e)}}(n):k(n):1==n.AllowAcceptFriend?function(e){try{w({url:a+"/friends/UpdateFriend",type:"PUT",data:{id:e.RockstarId,op:"confirm",accept:"true"},error:function(t){u("Couldn't complete accept "+e.Nickname+"'s friend request in AcceptFriend().",this,t),swal(h("error",t.status+" - "+t.statusText,"Something went wrong trying to accept <strong>"+e.Nickname+"</strong>'s friend request."))},success:function(t){u("Successfully completed accept "+e.Nickname+"'s friend request in AcceptFriend().",this,t),1==t.Status?swal(h("success","User accepted","<p><strong>"+e.Nickname+"</strong> already sent you a friend request, and we accepted it instead of sending a new one.</p><p>To view the changes to your friends list, please refresh the page.</p>")):swal(h("error","Something went wrong","Something went wrong trying to accept <strong>"+e.Nickname+"</strong>'s friend request."))}})}catch(e){return void l("Something went wrong in AcceptFriend().",e)}}(n):swal(h("error","Can't send request","You can't send <strong>"+e+"</strong> a friend request. This might be because you already sent them a friend request, or because they blocked you.")):swal(h("error","User not found","The nickname <strong>"+e+"</strong> doesn't exist."))}})})(e))}catch(e){return l("Something went wrong in #nt-qa_click.",e),!1}return!1})}else l("In order to use "+n+", you must log into your Social Club account.",'userNickname == "" || isLoggedIn != true'),swal(p("error","Log in required",n+" requires you to log in to be able to apply changes to your account. Please log into the account you want to use with "+n+", then click the bookmark again."))}catch(e){return l("Something went wrong.",e),void swal(p("error","An error occured",'<p style="margin:12px 0!important">'+n+' was unable to complete your request. Please try clicking the bookmark again. If the problem persists, please <a href="'+o+'" target="_blank">submit an issue</a> with the details below.</p><p style="margin:12px 0!important">Error:</p><pre>'+e+"</pre>"))}else l("The current website is not a Social Club website and "+n+" can't continue.",'window.location.protocol !== "https:" || !window.location.host.endsWith("socialclub.rockstargames.com")'),swal({type:"warning",title:"Wrong site",text:"<p>Whoops, you accidentally activated "+n+" on a wrong web page. To use "+n+", first browse to the Social Club website, then click the bookmark again.</p><p>Do you want to go to the Social Club website now?</p>",allowOutsideClick:!0,cancelButtonText:"No",closeOnConfirm:!1,confirmButtonText:"Yes",html:!0,showCancelButton:!0},function(){window.location.href="http://socialclub.rockstargames.com/"})},1e3)}